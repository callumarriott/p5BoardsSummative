<!DOCTYPE html>
<html>
	<head>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>
		<script src="sketch.js"></script>
		<script>
			function setup(){
				createCanvas(640, 480);
				rectMode(CENTER);
				fill(20);
				stroke(255, 251, 249);
				strokeWeight(4);
			}
			
			class Boards{
				constructor(width, height){
					this.width = width;
					this.height = height;
				}
				
				draw(){
					background(255, 251, 249);
					translate(this.width / 2, this.height / 2);
					var num = 10;
					var intervalX = map(mouseX, 0, this.width, 40, -40);
					var intervalY = map(abs(mouseX - this.width / 2), 0, this.width / 2, 0, -20);
					var rectX = 100;
					var rectY = 200;
					var tilt = map(mouseX, 0, this.width, -20, 20);
					for(var i = num - 1; i > 0; i--){
						push();
						var rhytm = map(pow(abs(sin(frameCount * 0.03 - i * 0.3)), 50), 0, 1, 0, -50)
							* map(abs(mouseX - this.width / 2), 0, this.width / 2, 0, 1);
						translate(intervalX * (i - num / 2.0), intervalY * (i - num / 2.0) + rhytm);
						beginShape();
						vertex(-rectX / 2.0, -rectY / 2.0 + tilt);
						vertex(rectX / 2.0, -rectY / 2.0 - tilt);
						vertex(rectX / 2.0, rectY / 2.0 - tilt);
						vertex(-rectX / 2.0, rectY / 2.0 + tilt);
						endShape(CLOSE);
						pop();
					}
				}
			}
			
			function draw(){
				let b = new Boards(640, 480);
				b.draw();
			}
		</script>
	</head>
	<body>
	</body>
</html>